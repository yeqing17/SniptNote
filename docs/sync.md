# GitHub Gist 云同步功能

## 功能概述

SniptNote 现在支持通过 GitHub Gist 进行数据云同步，实现跨设备数据共享和自动备份。

## 使用方法

### 1. 创建 GitHub Personal Access Token

1. 访问 [GitHub Settings → Developer settings → Personal access tokens → Tokens (classic)](https://github.com/settings/tokens/new)
2. 点击 "Generate new token (classic)"
3. 设置 Token 名称（如：`SniptNote Sync`）
4. 选择过期时间（建议选择较长时间或不过期）
5. **重要**：勾选 `gist` 权限（这是唯一需要的权限）
6. 点击 "Generate token"
7. **重要**：复制生成的 Token（只显示一次，请妥善保存）

### 2. 配置同步

1. 打开 SniptNote 应用
2. 点击右上角的云图标按钮（同步状态指示器）
3. 在同步设置对话框中：
   - 启用"启用同步"开关
   - 输入你的 GitHub Personal Access Token
   - 点击"测试"按钮验证 Token 是否有效
   - 选择是否启用"自动同步"（推荐开启）
   - 点击"保存"

### 3. 首次同步

配置完成后，首次同步会自动创建一个私有 Gist。Gist ID 会自动保存，后续同步会使用同一个 Gist。

### 4. 同步模式

#### 自动同步（推荐）
- 每次保存命令时自动同步到云端
- 静默执行，不阻塞用户操作
- 失败时会在状态指示器中显示错误

#### 手动同步
- 点击同步设置中的"立即同步"按钮上传数据
- 点击"拉取数据"按钮从云端下载数据

## 同步状态指示器

右上角的云图标会显示当前同步状态：

- **灰色云图标**：未启用同步
- **蓝色云图标 + 加载动画**：正在同步
- **绿色云图标**：同步成功
- **红色云图标**：同步失败（点击查看错误信息）

## 冲突处理

当本地和云端数据不一致时：

1. 系统会自动检测冲突
2. 拉取数据时会提示选择：
   - **使用远程数据**：用云端数据覆盖本地
   - **保留本地数据**：保持本地数据不变

## 安全说明

- Token 存储在本地配置文件中（桌面端存储在 `AppData` 目录）
- Token 仅用于访问 Gist API，不会用于其他操作
- Gist 默认创建为私有，只有你可以访问
- 建议定期更换 Token 以提高安全性

## 故障排除

### Token 无效
- 检查 Token 是否正确复制（注意前后空格）
- 确认 Token 是否已过期
- 确认 Token 是否具有 `gist` 权限

### 同步失败
- 检查网络连接
- 确认 GitHub API 是否可访问（某些地区可能需要代理）
- 查看错误提示信息

### Gist 不存在
- 如果删除了 Gist，需要重新创建
- 在同步设置中清除 Gist ID，下次同步会自动创建新的

## 技术细节

- 使用 GitHub Gist API v3
- 数据以 JSON 格式存储在 Gist 中
- 支持自动冲突检测和合并
- 同步配置独立存储，不影响本地数据

## 注意事项

- 首次同步会创建新的 Gist，需要确保 Token 有创建权限
- 建议定期手动备份（导出 JSON 文件）作为额外保障
- 如果多设备使用，建议启用自动同步以确保数据一致性


